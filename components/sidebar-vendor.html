<!--
 * Archivo: components/sidebar-vendor.html
 * Descripción: Componente reutilizable del sidebar para el panel de vendedor
 * Autor: Equipo ORIGINARIA
 * Fecha: 2024
 * Función: Navegación lateral común para todas las páginas del panel vendedor
-->

<!-- Sidebar Vendedor -->
<aside class="vendor-sidebar" id="vendorSidebar">
    <div class="sidebar-content">
        <!-- Sidebar Header -->
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <div class="logo-placeholder">ORIGINARIA</div>
            </div>
            <div class="vendor-info">
                <div class="vendor-avatar">
                    <img src="../assets/images/vendor-avatar.jpg" alt="Roberto Mamani" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                    <div class="avatar-placeholder">RM</div>
                </div>
                <div class="vendor-details">
                    <span class="vendor-name">Roberto Mamani</span>
                    <span class="vendor-store">Café Andino Los Andes</span>
                </div>
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="sidebar-nav">
            <div class="nav-section">
                <h3 class="nav-section-title">Principal</h3>
                <ul class="nav-list">
                    <li class="nav-item" data-page="dashboard">
                        <a href="../dashboard.html" class="nav-link">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="products">
                        <a href="../products/list.html" class="nav-link">
                            <i class="fas fa-box"></i>
                            <span>Mis Productos</span>
                            <span class="nav-badge">8</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="orders">
                        <a href="../sales/orders.html" class="nav-link">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Pedidos</span>
                            <span class="nav-badge pending">3</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="sales">
                        <a href="../sales/analytics.html" class="nav-link">
                            <i class="fas fa-chart-line"></i>
                            <span>Ventas</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-section-title">Gestión</h3>
                <ul class="nav-list">
                    <li class="nav-item" data-page="inventory">
                        <a href="../inventory/stock.html" class="nav-link">
                            <i class="fas fa-warehouse"></i>
                            <span>Inventario</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="customers">
                        <a href="../customers/list.html" class="nav-link">
                            <i class="fas fa-users"></i>
                            <span>Clientes</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="reviews">
                        <a href="../reviews/manage.html" class="nav-link">
                            <i class="fas fa-star"></i>
                            <span>Reseñas</span>
                            <span class="nav-badge">2</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="promotions">
                        <a href="../marketing/promotions.html" class="nav-link">
                            <i class="fas fa-tag"></i>
                            <span>Promociones</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-section-title">Herramientas</h3>
                <ul class="nav-list">
                    <li class="nav-item" data-page="analytics">
                        <a href="../analytics/reports.html" class="nav-link">
                            <i class="fas fa-chart-bar"></i>
                            <span>Análisis</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="marketing">
                        <a href="../marketing/campaigns.html" class="nav-link">
                            <i class="fas fa-bullhorn"></i>
                            <span>Marketing</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="shipping">
                        <a href="../shipping/zones.html" class="nav-link">
                            <i class="fas fa-truck"></i>
                            <span>Envíos</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-section-title">Cuenta</h3>
                <ul class="nav-list">
                    <li class="nav-item" data-page="profile">
                        <a href="../profile/settings.html" class="nav-link">
                            <i class="fas fa-user-cog"></i>
                            <span>Mi Perfil</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="billing">
                        <a href="../billing/payments.html" class="nav-link">
                            <i class="fas fa-credit-card"></i>
                            <span>Facturación</span>
                        </a>
                    </li>
                    <li class="nav-item" data-page="support">
                        <a href="../support/tickets.html" class="nav-link">
                            <i class="fas fa-question-circle"></i>
                            <span>Soporte</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Quick Stats -->
        <div class="sidebar-stats">
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-eye"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value">1,245</div>
                    <div class="stat-label">Visitas Hoy</div>
                </div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value">23</div>
                    <div class="stat-label">Ventas Mes</div>
                </div>
            </div>
        </div>

        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
            <div class="sidebar-actions">
                <button class="sidebar-btn" onclick="showHelp()" title="Ayuda">
                    <i class="fas fa-question"></i>
                </button>
                <button class="sidebar-btn" onclick="toggleNotifications()" title="Notificaciones">
                    <i class="fas fa-bell"></i>
                    <span class="notification-dot"></span>
                </button>
                <button class="sidebar-btn" onclick="showSettings()" title="Configuración">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="sidebar-btn logout-btn" onclick="logout()" title="Cerrar Sesión">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </div>
</aside>

<!-- Sidebar JavaScript -->
<script>
    // Marcar como activo el elemento actual basado en la URL
    document.addEventListener('DOMContentLoaded', function() {
        const currentPath = window.location.pathname;
        const navItems = document.querySelectorAll('.nav-item');
        
        navItems.forEach(item => {
            const link = item.querySelector('.nav-link');
            if (link && currentPath.includes(link.getAttribute('href'))) {
                item.classList.add('active');
            }
        });
    });

    // Funciones del sidebar
    function showHelp() {
        alert('Abriendo centro de ayuda...');
    }

    function toggleNotifications() {
        alert('Mostrando notificaciones...');
    }

    function showSettings() {
        alert('Abriendo configuración...');
    }

    function logout() {
        if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
            alert('Cerrando sesión...');
            // window.location.href = '../public/login.html';
        }
    }

    // Toggle sidebar en móviles
    function toggleSidebar() {
        const sidebar = document.getElementById('vendorSidebar');
        sidebar.classList.toggle('mobile-open');
    }

    // Cerrar sidebar al hacer clic fuera en móviles
    document.addEventListener('click', function(event) {
        const sidebar = document.getElementById('vendorSidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        if (window.innerWidth <= 768 && 
            !sidebar.contains(event.target) && 
            !sidebarToggle.contains(event.target)) {
            sidebar.classList.remove('mobile-open');
        }
    });

    // Actualizar badges dinámicamente
    function updateBadges() {
        // Simular actualizaciones de badges
        const badges = {
            products: Math.floor(Math.random() * 20) + 1,
            orders: Math.floor(Math.random() * 10) + 1,
            reviews: Math.floor(Math.random() * 5) + 1
        };

        Object.keys(badges).forEach(key => {
            const navItem = document.querySelector(`[data-page="${key}"] .nav-badge`);
            if (navItem) {
                navItem.textContent = badges[key];
            }
        });
    }

    // Actualizar stats del sidebar
    function updateSidebarStats() {
        const statsData = {
            visits: Math.floor(Math.random() * 2000) + 1000,
            sales: Math.floor(Math.random() * 50) + 10
        };

        const visitsStat = document.querySelector('.sidebar-stats .stat-value');
        const salesStat = document.querySelectorAll('.sidebar-stats .stat-value')[1];
        
        if (visitsStat) visitsStat.textContent = statsData.visits.toLocaleString();
        if (salesStat) salesStat.textContent = statsData.sales;
    }

    // Actualizar cada 30 segundos
    setInterval(() => {
        updateBadges();
        updateSidebarStats();
    }, 30000);
</script>